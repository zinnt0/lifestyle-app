# Lifestyle App - Fitness & Nutrition Tracker

## Projekt-√úbersicht

React Native (Expo) App f√ºr Training, Ern√§hrung und Supplements.
Zielgruppe: Fitness-Enthusiasten, wissenschaftlich fundiert.

## Tech Stack

- **Frontend**: React Native + Expo (TypeScript)
- **Backend**: Supabase (PostgreSQL + Auth)
- **Navigation**: React Navigation
- **State**: React Hooks (kein Redux)
- **Styling**: React Native StyleSheet (kein Tailwind/NativeWind)

## Projekt-Struktur

```
src/
‚îú‚îÄ‚îÄ lib/              # Third-party library configs
‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts   # ‚úÖ Supabase client mit AsyncStorage
‚îú‚îÄ‚îÄ services/         # Business logic
‚îÇ   ‚îî‚îÄ‚îÄ auth.service.ts  # ‚úÖ Authentication service
‚îú‚îÄ‚îÄ utils/            # Utilities
‚îÇ   ‚îî‚îÄ‚îÄ validation.ts    # ‚úÖ Form validation functions
‚îú‚îÄ‚îÄ hooks/            # Custom React hooks
‚îÇ   ‚îî‚îÄ‚îÄ useForm.ts       # ‚úÖ Form state management
‚îú‚îÄ‚îÄ screens/          # Screen components
‚îÇ   ‚îú‚îÄ‚îÄ auth/         # ‚è∏Ô∏è Login, Register, Onboarding
‚îÇ   ‚îú‚îÄ‚îÄ training/     # ‚è∏Ô∏è Training screens
‚îÇ   ‚îî‚îÄ‚îÄ nutrition/    # ‚è∏Ô∏è Nutrition screens
‚îú‚îÄ‚îÄ components/       # Reusable UI components
‚îÇ   ‚îî‚îÄ‚îÄ ui/           # ‚úÖ Button, Card, Input, Text
‚îú‚îÄ‚îÄ types/            # ‚è∏Ô∏è TypeScript types
‚îú‚îÄ‚îÄ tests/            # Test files
‚îÇ   ‚îú‚îÄ‚îÄ auth.test.simple.ts   # ‚úÖ Auth tests
‚îÇ   ‚îî‚îÄ‚îÄ validation.test.ts    # ‚úÖ Validation tests (59 tests)
‚îî‚îÄ‚îÄ navigation/       # ‚è∏Ô∏è Navigation setup
```

## Supabase Schema

**18 Tabellen, alle erstellt:**

- Core: profiles, exercises (6 rows), intolerances_catalog (8 rows)
- Training: training_plans, plan_workouts, plan_exercises, workout_sessions, workout_sets, user_1rm
- Nutrition: nutrition_goals, meal_plans, meals, meal_items, food_items, daily_nutrition_log
- Supplements: supplements, user_supplements

**RLS aktiviert** auf allen User-Tabellen.

## Wichtige Dateien

- `.env`: EXPO_PUBLIC_SUPABASE_URL, EXPO_PUBLIC_SUPABASE_ANON_KEY
- `src/lib/supabase.ts`: Supabase client setup (‚úÖ implementiert mit AsyncStorage)
- `src/services/auth.service.ts`: Auth logic (‚úÖ komplett mit 7 Funktionen)
- `src/utils/validation.ts`: Form validation utilities (‚úÖ implementiert)
- `src/hooks/useForm.ts`: Custom form hook (‚úÖ implementiert)
- `src/components/ui/`: Button, Card, Input, Text (‚úÖ implementiert)
- `src/navigation/AppNavigator.tsx`: Navigation (‚è∏Ô∏è geplant)

## Implementierte Features (Stand: 2025-12-25)

### 1. Authentication System (‚úÖ Komplett)

**Dateien**: `src/lib/supabase.ts`, `src/services/auth.service.ts`

**Funktionen**:
- `signUp(email, password)` - Registrierung mit deutscher Fehlerbehandlung
- `signIn(email, password)` - Login
- `signOut()` - Logout
- `getCurrentUser()` - Aktueller User
- `onAuthStateChange(callback)` - Auth state listener
- `resetPassword(email)` - Passwort zur√ºcksetzen
- `updatePassword(newPassword)` - Passwort √§ndern

**Features**:
- AsyncStorage persistence f√ºr Sessions
- Alle Fehler in Deutsch
- TypeScript strict mode
- Response format: `{ user: User | null, error: string | null }`

**Tests**: `src/tests/auth.test.simple.ts` - Run mit `npm run test:auth:simple`

### 2. Form Validation System (‚úÖ Komplett)

**Dateien**: `src/utils/validation.ts`, `src/hooks/useForm.ts`

**Validators**:
- `validateEmail()` - Email-Format pr√ºfen
- `validatePassword()` - Min 8 Zeichen, Gro√ü-/Kleinbuchstaben, Zahl
- `validateName()` - Namen validieren
- `validateAge()` - Alter 13-120 Jahre
- `validateRegistrationForm()` - Komplette Registrierung
- `validateLoginForm()` - Login-Form

**useForm Hook**:
```typescript
const { values, errors, isSubmitting, handleChange, handleSubmit, reset } = useForm({
  initialValues: { email: '', password: '' },
  validate: validateLoginForm,
  onSubmit: async (values) => { /* logic */ }
});
```

**Tests**: 59 Unit Tests in `src/tests/validation.test.ts` - Run mit `npm run test:validation`

**Design-Entscheidung**: Keine externe Validation Library (Zod/Yup) f√ºr kleineren Bundle

### 3. UI Components (‚úÖ Basis-Set)

**Location**: `src/components/ui/`

- `Button.tsx` - Variants: primary, secondary, outline
- `Card.tsx` - Container component
- `Input.tsx` - Text input mit error state
- `Text.tsx` - Typography mit size variants

Alle mit TypeScript interfaces und variant-based styling.

## Aktuelle Phase: MVP

**Abgeschlossen**:
- ‚úÖ Authentication Service
- ‚úÖ Form Validation System
- ‚úÖ UI Components (Basis)
- ‚úÖ Testing Setup

**Diese Woche**:
- üîÑ Login & Registrierung Screens (verwenden obige Services)
- üîÑ Onboarding Flow
- ‚è∏Ô∏è Trainingsplan-Generator

**N√§chste Woche**:
- ‚è∏Ô∏è Workout Tracking
- ‚è∏Ô∏è Nutrition Tracking

## Architektur-Entscheidungen

### 1. Validation ohne externe Library
**Entscheidung**: Custom validation in `src/utils/validation.ts` statt Zod/Yup
**Grund**: Kleinerer Bundle, volle Kontrolle, ausreichend f√ºr MVP
**Impact**: 59 Tests, alle Validation-Regeln selbst definiert

### 2. Testing Setup ohne Framework
**Entscheidung**: `tsx` + console assertions statt Jest/Vitest
**Grund**: Schneller Setup, weniger Dependencies f√ºr MVP
**Future**: Migration zu Jest empfohlen wenn Projekt w√§chst

### 3. Supabase AsyncStorage Integration
**Entscheidung**: AsyncStorage f√ºr Session persistence
**Grund**: Native persistence, keine zus√§tzlichen Cookies n√∂tig
**Implementation**: In `src/lib/supabase.ts` konfiguriert

### 4. Deutsche Error Messages
**Entscheidung**: Alle Fehler in Deutsch
**Grund**: Zielgruppe ist deutsch
**Future**: i18n-Support wenn internationale Expansion geplant

### 5. Service Layer Pattern
**Entscheidung**: Separate `services/` f√ºr Business Logic
**Grund**: Trennung von UI und Logik, bessere Testbarkeit
**Example**: `auth.service.ts` kann ohne UI getestet werden

## Coding Standards

- TypeScript strict mode
- Functional components + Hooks (keine Classes)
- Async/await (keine Promises.then)
- Descriptive variable names (deutsch ok)
- Error handling √ºberall
- Comments nur wenn n√∂tig
- Alle Dateien mit absoluten Pfaden referenzieren in Dokumentation

## Testing Infrastructure

**Setup**:
- `tsx` f√ºr TypeScript execution (kein Jest/Vitest)
- `dotenv` f√ºr Environment variables
- Simple console-based assertions

**Test Commands**:
```bash
npm run test:auth:simple    # Authentication service tests
npm run test:validation     # Validation tests (59 tests, all passing)
```

**Test Files**:
- `src/tests/auth.test.simple.ts` - Auth service functions
- `src/tests/validation.test.ts` - Alle Validation utilities

**Manual Testing**:
- iOS Simulator / Android Emulator
- Nach jedem Screen testen
- Validierung testen (leere Felder, wrong format)

## Git Workflow

- `main` = stable
- Feature branches: `features/feature-name` (aktuell: `features/ui`)
- Pull bevor du arbeitest
- Kleine, h√§ufige Commits

## Supabase Access

Via MCP Server - direkte DB-Zugriffe m√∂glich.
