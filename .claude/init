# Lifestyle App - Fitness & Nutrition Tracker

**Last Updated:** 2026-01-02
**Project Type:** React Native (Expo) Lifestyle Application
**Branch:** main
**Status:** Active Development

---

## Projekt-√úbersicht

React Native (Expo) App f√ºr Training, Ern√§hrung und Supplements.
Eine umfassende Lifestyle-Anwendung mit Training Management, Recovery Tracking, Nutrition Tracking und User Profile Management. Die App nutzt Supabase als Backend und folgt einer modularen, feature-basierten Architektur.

Zielgruppe: Fitness-Enthusiasten, wissenschaftlich fundiert.

---

## Tech Stack

- **Frontend**: React Native 0.81.5 + Expo ~54.0.30 (TypeScript 5.9.2)
- **Backend**: Supabase (PostgreSQL + Auth)
- **Navigation**: React Navigation 7.x (Native Stack + Bottom Tabs)
- **UI Library**: React Native Paper 5.14.5
- **State Management**: React Context API + AsyncStorage
- **Testing**: tsx 4.19.2 f√ºr TypeScript test execution

---

## Projekt-Struktur

```
lifestyle-app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                    # App entry points
‚îÇ   ‚îú‚îÄ‚îÄ lib/                    # Third-party library configs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts         # ‚úÖ Supabase client mit AsyncStorage
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                 # ‚úÖ 23+ UI Components (Reusable) + theme.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/                # ‚úÖ App-specific components (RecoveryCard, etc.)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ training/           # ‚úÖ Training feature components
‚îÇ   ‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Training/           # ‚úÖ Training screens (NEW)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ onboarding/         # ‚úÖ 6 Onboarding Screens + Summary
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/                # ‚úÖ Main app screens (Home, Profile, DailyCheckin)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/               # ‚è∏Ô∏è Login, Register
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ nutrition/          # ‚è∏Ô∏è Nutrition screens
‚îÇ   ‚îú‚îÄ‚îÄ services/               # Business logic & API services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts     # ‚úÖ Authentication service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.service.ts  # ‚úÖ Profile & onboarding service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recovery.service.ts # ‚úÖ Recovery tracking service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trainingService.ts  # ‚úÖ Training service with caching
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ calorieCalculationService.ts  # ‚úÖ Calorie calculations (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ utils/                  # Utility functions & helpers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validation.ts       # ‚úÖ Form validation functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ emojiHelpers.ts     # ‚úÖ Emoji processing utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ planRecommendationScoring.ts  # ‚úÖ 4D Scoring Algorithm
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recommendationAnalytics.ts    # ‚úÖ Analytics System
‚îÇ   ‚îú‚îÄ‚îÄ contexts/               # React Context providers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ OnboardingContext.tsx  # ‚úÖ 6-step onboarding state
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                  # Custom React hooks
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useForm.ts          # ‚úÖ Form state management
‚îÇ   ‚îú‚îÄ‚îÄ types/                  # TypeScript type definitions
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ training.types.ts   # ‚úÖ Training types (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ tests/                  # Test files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.test.simple.ts # ‚úÖ Auth tests
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.test.ts  # ‚úÖ Validation tests (59 tests)
‚îÇ   ‚îî‚îÄ‚îÄ navigation/             # ‚úÖ Complete navigation system
‚îÇ       ‚îú‚îÄ‚îÄ AppNavigator.tsx    # ‚úÖ Root navigator (Auth/Onboarding/Main routing)
‚îÇ       ‚îú‚îÄ‚îÄ OnboardingNavigator.tsx  # ‚úÖ Onboarding flow coordinator
‚îÇ       ‚îú‚îÄ‚îÄ MainNavigator.tsx   # ‚úÖ Main app navigation
‚îÇ       ‚îú‚îÄ‚îÄ types.ts            # ‚úÖ Navigation type definitions
‚îÇ       ‚îî‚îÄ‚îÄ index.ts            # ‚úÖ Navigation exports
‚îú‚îÄ‚îÄ .claude/                    # AI agent definitions & documentation
‚îÇ   ‚îú‚îÄ‚îÄ agents/                 # Specialized AI agents
‚îÇ   ‚îú‚îÄ‚îÄ deliverables/           # Feature implementation summaries
‚îÇ   ‚îú‚îÄ‚îÄ migrations/             # Architecture migration guides
‚îÇ   ‚îú‚îÄ‚îÄ research/               # Technical research & optimization docs
‚îÇ   ‚îî‚îÄ‚îÄ test-reports/           # Test execution reports
‚îú‚îÄ‚îÄ docs/                       # Integration guides
‚îú‚îÄ‚îÄ scripts/                    # Utility scripts
‚îú‚îÄ‚îÄ sql/                        # Database migrations
‚îî‚îÄ‚îÄ supabase/                   # Supabase configuration
```

---

## Recent Major Changes (December 2024 - January 2026)

### UI Modernization (Feature Branch: feature/ui-modernization) ‚≠ê NEW

**Date:** 2026-01-02
**Status:** ‚úÖ Merged to main

Eine umfassende UI-Modernisierung mit zentralisiertem Theme-System, neuen wiederverwendbaren Komponenten und konsistentem Design √ºber die gesamte App.

#### 1. Centralized Theme System

**Location:** `src/components/ui/theme.ts`

**Features:**
- **Unified Color Palette:**
  - Primary Colors (blue-500, blue-600, blue-700)
  - Semantic Colors (success, warning, error, info)
  - Neutral Palette (gray shades)
  - Background & Surface Colors
  - Brand Colors (MODO brand integration)
- **Typography System:**
  - Font sizes (xs: 12, sm: 14, md: 16, lg: 18, xl: 20, 2xl: 24, 3xl: 30, 4xl: 36)
  - Font weights (normal, medium, semibold, bold)
  - Line heights optimized for readability
- **Spacing Scale:**
  - Consistent spacing (xs: 4, sm: 8, md: 12, lg: 16, xl: 20, 2xl: 24, 3xl: 32, 4xl: 40, 5xl: 48)
- **Shadow Definitions:**
  - sm, md, lg, xl shadows for elevation
- **Border Radius:**
  - xs: 4, sm: 6, md: 8, lg: 12, xl: 16, 2xl: 20, full: 9999

**Benefits:**
- Single source of truth f√ºr Design-Tokens
- Konsistente UI √ºber alle Screens
- Einfache Theme-Anpassungen
- Bessere Wartbarkeit

#### 2. New UI Components (10+ Components)

**Location:** `src/components/ui/`

**New Components:**

- **ActivityChip.tsx**
  - Visual chip f√ºr Activity/Recovery Tracking
  - Color-coded (gray, blue, green, orange, red variants)
  - Icon Support (text-based icons)
  - Verwendung: Recovery Activities, Tags

- **Alert.tsx**
  - Professional Alert/Banner Component
  - 4 Variants: info, success, warning, error
  - Icon Integration
  - Dismissable Option
  - Accessibility-ready

- **AppHeader.tsx**
  - App-wide Header Component
  - Logo Support (MODO Logo)
  - Gradient Background
  - Consistent Branding

- **FormGroup.tsx**
  - Form Field Wrapper
  - Label + Input + Error Message
  - Required Field Indicator
  - Helper Text Support
  - Validation State Styling

- **InfoBox.tsx**
  - Information Display Box
  - 4 Variants: info, success, warning, error
  - Icon Support
  - Title + Message Layout
  - Collapsible Option

- **OptionButton.tsx**
  - Selectable Option Button
  - Selected State Styling
  - Icon Support
  - Checkmark Indicator
  - Verwendung: Multi-choice selections

- **PageHeader.tsx**
  - Page-level Header
  - Title + Subtitle
  - Back Button Support
  - Action Buttons
  - Gradient Option

- **ProfileField.tsx**
  - Profile Information Display Field
  - Label + Value Layout
  - Icon Support
  - Editable Indicator
  - Verwendung: ProfileScreen

- **SectionTitle.tsx**
  - Section Header Component
  - Title + Optional Action
  - Divider Line
  - Count Badge Support
  - Consistent Typography

- **StatsCard.tsx**
  - Statistics Display Card
  - Icon + Label + Value Layout
  - Color-coded Values
  - Trend Indicators (‚Üë‚Üì)
  - Verwendung: Dashboards, Analytics

**Updated Components:**

- **Button.tsx** - Modernized with theme integration, better variants
- **Card.tsx** - Simplified with theme system, elevation support
- **Input.tsx** - Enhanced validation states, better accessibility
- **Text.tsx** - Full typography system integration
- **MultiSelectChips.tsx** - Theme colors, better touch targets
- **NumberPicker.tsx** - Improved styling, haptic feedback
- **RadioGroup.tsx** - Theme integration, better spacing
- **Slider.tsx** - Modern design, better labels
- **WeekdaySelector.tsx** - Theme colors, improved UX
- **ProgressBar.tsx** - Animated, theme colors
- **GoalCard.tsx** - Modernized design, better icons

#### 3. App-Specific Components

**Location:** `src/components/app/`

**New Directory f√ºr app-specific components:**

- **RecoveryCard.tsx** ‚≠ê NEW
  - Dedicated Recovery Status Display
  - Color-coded Score Display (Green/Blue/Yellow/Orange/Red)
  - Recovery Trend Indicator
  - Action Button (Navigate to Check-in)
  - Integration mit Recovery Service
  - Verwendung: HomeScreen

**Index Export:** `src/components/app/index.ts`

#### 4. Training Components Updates

**Location:** `src/components/training/`

**Updated Components:**

- **ActivePlanCard.tsx** - Theme integration, modern card design
- **InactivePlanCard.tsx** - Consistent styling with ActivePlanCard
- **PausedSessionCard.tsx** - Theme colors, better CTA buttons
- **QuickWorkoutAction.tsx** - Modernized action button
- **ProgressBar.tsx** - Animated, theme-based colors
- **AlternativesModal.tsx** - Theme integration
- **EstimateOneRMModal.tsx** - Consistent modal styling
- **FitnessStats.tsx** - StatsCard integration
- **HistoricalPerformance.tsx** - Chart color updates
- **SetRow.tsx** - Better input styling
- **WorkoutPerformanceComparison.tsx** - Theme colors
- **PaginationDots.tsx** - Theme integration

**Export Update:** Alle Components exportiert via `src/components/training/index.ts`

#### 5. Screen Modernization

**Updated Screens:**

- **ProfileScreen.tsx** ‚≠ê MAJOR UPDATE
  - Complete redesign with AppHeader
  - ProfileField Components f√ºr alle Felder
  - SectionTitle f√ºr strukturierte Sections
  - StatsCard f√ºr Training Stats
  - InfoBox f√ºr wichtige Informationen
  - Alert f√ºr Fehlermeldungen
  - Moderne Card-basierte Layouts
  - Improved Navigation

- **HomeScreen.tsx** ‚≠ê UPDATED
  - AppHeader Integration
  - RecoveryCard Integration
  - SectionTitle Usage
  - StatsCard f√ºr Quick Stats
  - Modernized Card Layouts
  - Better Information Hierarchy

- **DailyCheckinScreen.tsx** ‚≠ê UPDATED
  - FormGroup Integration
  - Alert Component f√ºr Feedback
  - InfoBox f√ºr Instructions
  - Theme-based Color Coding
  - Improved Form Layout

- **ProfileEditScreen.tsx** ‚≠ê UPDATED
  - FormGroup f√ºr alle Input Fields
  - Alert Component f√ºr Validation Errors
  - OptionButton f√ºr Selections
  - Better Form Structure

- **TrainingDashboardScreen.tsx** ‚≠ê UPDATED
  - SectionTitle Integration
  - StatsCard f√ºr Training Metrics
  - Modernized Card Layouts

- **TrainingPlanDetailScreen.tsx** ‚≠ê UPDATED
  - Theme System Integration
  - StatsCard Grid f√ºr Plan Details
  - InfoBox f√ºr Dynamic Plan Badge
  - Modernized Information Display
  - Better Visual Hierarchy

#### 6. Navigation Updates

**Updated Navigators:**

- **MainNavigator.tsx**
  - Header styling mit theme colors
  - Consistent navigation design

- **TrainingStackNavigator.tsx**
  - Theme-based header colors
  - Unified navigation experience

#### 7. Utilities & Helpers

**New Utilities:**

- **emojiHelpers.ts** ‚≠ê NEW
  - `removeEmojis(text: string)` - Entfernt Emojis aus Text
  - `extractEmojis(text: string)` - Extrahiert nur Emojis
  - `hasEmojis(text: string)` - Pr√ºft ob Text Emojis enth√§lt
  - Verwendung: Text Processing, Display Logic

#### 8. Assets

**New Assets:**

- **MODO_Logo.png** ‚≠ê NEW
  - Brand Logo (117KB PNG)
  - High-resolution f√ºr Retina Displays
  - Verwendung: AppHeader, Splash Screen

#### 9. Dependencies

**New Dependencies:**

- **react-native-svg** ‚≠ê NEW
  - SVG Graphics Support
  - Icon Rendering
  - Enhanced Graphics Capabilities

#### 10. Design System Benefits

**Improvements:**

- ‚úÖ **Consistency:** Einheitliches Design √ºber alle Screens
- ‚úÖ **Maintainability:** Zentrales Theme-System f√ºr einfache Anpassungen
- ‚úÖ **Reusability:** 20+ wiederverwendbare UI-Komponenten
- ‚úÖ **Performance:** Optimierte Component-Rendering
- ‚úÖ **Accessibility:** Verbesserte Touch-Targets und Kontraste
- ‚úÖ **Developer Experience:** Einfachere Component-Integration
- ‚úÖ **Scalability:** Einfaches Hinzuf√ºgen neuer Features

**Migration Pattern:**

```typescript
// Before
const COLORS = { primary: '#007AFF', ... };  // Duplicate in every file

// After
import { theme } from '@/components/ui/theme';
const primaryColor = theme.colors.primary.blue500;
```

---

### Training Section Enhancement (Feature Branch: feature/training-section)

**Date:** 2024-12-28 to 2025-12-30
**Status:** ‚úÖ Merged to main

Eine umfassende √úberarbeitung des Training-Moduls mit intelligenten Plan-Empfehlungen, Kalorienverfolgung, Fitness-Statistiken, 1RM-Tracking, Performance-Vergleichen und erweiterten Scoring-Algorithmen.

#### 1. New Training Components

**Location:** `src/components/training/`

- **CalorieCard.tsx**
  - Zeigt Kalorienverbrauch f√ºr Workouts
  - Echtzeit-Kalorienberechnung Integration

- **ExerciseCalorieBreakdown.tsx**
  - Detaillierte Kalorienaufschl√ºsselung pro √úbung
  - Visuelle Darstellung des Energieverbrauchs

- **FitnessStats.tsx**
  - Umfassendes Fitness-Statistik Dashboard
  - Tracking von Progress-Metriken und Performance-Indikatoren

- **PausedSessionCard.tsx**
  - Verwaltung und Anzeige pausierter Training Sessions
  - Quick Resume Funktionalit√§t

- **EstimateOneRMModal.tsx** ‚≠ê NEW (2024-12-30)
  - Modal zur Sch√§tzung von 1RM-Werten aus Workout-Daten
  - Nutzt Epley-Formel f√ºr pr√§zise Sch√§tzungen
  - Interaktive Eingabe f√ºr Gewicht und Wiederholungen

- **ExercisePerformanceBar.tsx** ‚≠ê NEW (2024-12-30)
  - Visuelle Darstellung der Exercise Performance
  - Progress Bars f√ºr Performance-Tracking
  - Color-coded f√ºr Verbesserung/Verschlechterung

- **HistoricalPerformance.tsx** ‚≠ê NEW (2024-12-30)
  - Chart-basierte Darstellung historischer Performance
  - Zeigt Entwicklung √ºber mehrere Workouts
  - Integriert mit Performance Comparison Service

- **WorkoutPerformanceComparison.tsx** ‚≠ê NEW (2024-12-30)
  - Vergleicht aktuelles Workout mit vorherigen Sessions
  - Exercise-by-Exercise Comparison
  - Prozentuale Verbesserung/Verschlechterung Anzeige
  - Motivationsfeedback basierend auf Performance

- **PlanRecommendationCard.tsx**
  - Professionelle Empfehlungskarten mit Scoring-Breakdown
  - Interaktives UI mit erweiterbaren Score-Details
  - Badge-System f√ºr Empfehlungsqualit√§t
  - Integration Guide: `docs/INTEGRATION_GUIDE.md`

- **ScoreBreakdownChart.tsx** ‚≠ê PRODUCTION READY
  - **Status:** ‚úÖ Production Ready (2024-12-29)
  - **Lines of Code:** 446 lines + 1779 lines total (mit Tests & Docs)
  - **Features:**
    - Animierte Bar Charts (0 ‚Üí Zielwert, 800ms mit 100ms Stagger)
    - 4 Score-Kategorien mit farbcodierter Visualisierung
    - Collapsible/Expandable Interface
    - Interaktive Info-Buttons mit Modal Dialogs
    - Accessibility-ready (WCAG 2.1 AA compliant)
    - 60fps smooth animations mit React.memo Optimierung
  - **Documentation:**
    - ScoreBreakdownChart.README.md - Komplette Usage Guide
    - ScoreBreakdownChart.SUMMARY.md - Implementation Summary
    - ScoreBreakdownChart.accessibility.md - WCAG Compliance Details
    - ScoreBreakdownChart.ANIMATION.md - Animation Specifications
  - **Testing:**
    - Comprehensive Test Suite: `__tests__/ScoreBreakdownChart.test.tsx`
    - Demo Component: `ScoreBreakdownChart.demo.tsx` (8 Szenarien)
    - Coverage: Rendering, Scores, Interactions, Accessibility, Edge Cases
  - **Accessibility:**
    - Color Contrast Ratios erf√ºllen alle WCAG 2.1 AA (4.5:1+)
    - Screen Reader Support (VoiceOver + TalkBack)
    - Touch Targets ‚â•44pt
    - Semantische Labels und Hints
  - **Known Issues:**
    - Kein Reduced Motion Support (medium priority)
    - Kein RTL Support (medium priority)
    - Keine Dark Mode Optimierung (medium priority)

**UI Components (NEW - 2024-12-30):**

**Location:** `src/components/ui/`

- **WeekdaySelector.tsx** ‚≠ê NEW
  - Multi-Select Weekday Selector Component
  - Visual day-of-week selection (Mo-So)
  - Integration mit Preferred Training Days Feature
  - Returns array of selected days (0=Sunday, 6=Saturday)

**Component Index:** Alle Components exportiert via `src/components/training/index.ts` und `src/components/ui/index.ts`

#### 2. Updated Training Components

Die folgenden existierenden Components wurden signifikant erweitert:

- **ActivePlanCard.tsx** - Enhanced Plan Display mit neuen Metriken
- **AlternativesModal.tsx** - Verbesserte Exercise Alternative Selection
- **InactivePlanCard.tsx** - Aktualisierte Inactive Plan Visualisierung
- **QuickWorkoutAction.tsx** - Streamlined Quick Workout Initiation
- **SetRow.tsx** - Enhanced Set Tracking UI

#### 3. Training Screens Updates

**Location:** `src/screens/Training/`

Alle Training Screens wurden aktualisiert um neue Features zu integrieren:

- **TrainingDashboardScreen.tsx**
  - Zentrale Hub f√ºr Training Activities
  - Zeigt Active Plans, Paused Sessions, Fitness Stats

- **GuidedPlanFlowScreen.tsx**
  - Intelligenter Plan-Empfehlungsflow
  - Integration mit PlanRecommendationCard
  - User Profile-basiertes Plan Matching

- **CustomPlanFlowScreen.tsx**
  - Custom Plan Creation Workflow
  - Enhanced Validation und UX

- **TrainingPlanDetailScreen.tsx**
  - Detaillierte Plan-Ansicht mit allen Metriken
  - Calorie Tracking Integration

- **WorkoutSessionScreen.tsx**
  - Aktives Workout Tracking
  - Echtzeit-Kalorienberechnung
  - Pause/Resume Funktionalit√§t

- **WorkoutSummaryScreen.tsx**
  - Post-Workout Summary mit detaillierten Analytics
  - Calorie Burn Summary und Exercise Breakdown
  - **NEW:** Integration mit Workout Performance Comparison
  - **NEW:** Zeigt Verbesserung/Verschlechterung im Vergleich zu letzter Session

- **OneRMInputScreen.tsx** ‚≠ê NEW (2024-12-30)
  - Screen f√ºr initiale 1RM-Eingabe bei Plan-Start
  - Required f√ºr Plans mit dynamischer Gewichtsberechnung
  - Exercise-by-Exercise 1RM Input
  - Validation und Fehlerbehandlung
  - Option zur Sch√§tzung via Epley-Formel
  - Automatic Navigation nach erfolgreicher Eingabe

- **PlanProgressScreen.tsx** ‚≠ê NEW (2024-12-30)
  - Zeigt Training Max (TM) Progression f√ºr dynamische Plans
  - Overview Card mit Plan-Details (TM%, aktuelle Woche)
  - Exercise List mit Initial 1RM und Current TM
  - Weekly Progression History pro Exercise
  - Pull-to-Refresh Funktionalit√§t
  - Button f√ºr 1RM-Updates
  - Integration mit `training_max_progression` Table

- **HomeScreen.tsx** (app level)
  - Aktualisiert f√ºr Training Module Changes
  - Quick Access zu Training Features

#### 4. Services & Business Logic

**Location:** `src/services/`

- **trainingService.ts** - Enhanced Training Logic
  - **Template Caching:** 5-Minuten In-Memory Cache f√ºr Plan Templates
  - **Optimierte Queries:** Explicit SELECT Lists, reduzierter Data Transfer
  - **Sorting:** Nach completion_status und popularity_score
  - **Neue Methods:**
    - `getPlanTemplates()` - Fetch all plan templates mit Caching
    - `clearTemplateCache()` - Cache Invalidation
    - `createPlanFromTemplate()` - Plan Creation von Recommendations
  - **Performance:** Drastisch reduzierter Database Access durch Caching

- **calorieCalculationService.ts** - Neuer Service
  - Echtzeit-Kalorienberechnung basierend auf Exercises
  - MET (Metabolic Equivalent of Task) Calculations
  - User Profile Integration (Weight, Age, Fitness Level)
  - Per-Exercise und Total Workout Calorie Tracking

- **oneRMService.ts** ‚≠ê NEW (2024-12-30)
  - **Purpose:** Comprehensive 1RM (One Rep Max) Management
  - **Lines of Code:** 450 lines
  - **Key Functions:**
    - `getCurrentOneRM(userId, exerciseId)` - L√§dt aktuellen 1RM via `user_current_1rm` view
    - `getAllCurrentOneRMs(userId)` - L√§dt alle 1RM-Werte eines Users
    - `saveOneRM(userId, exerciseId, weight, isEstimated, notes)` - Speichert 1RM in DB
    - `getRequiredOneRMExercises(planType)` - Holt Required Exercises f√ºr Plan
    - `calculateWorkingWeight(userId, exerciseId, percentageRM, tmPercentage)` - Berechnet Arbeitsgewicht via RPC
    - `checkMissingOneRM(userId, exerciseIds)` - Pr√ºft fehlende 1RM-Werte
    - `estimateOneRMFromWorkout(weight, reps)` - Epley-Formel (1RM = weight √ó (1 + reps/30))
    - `estimateAndSaveOneRM(userId, exerciseId, weight, reps, notes)` - Sch√§tzt und speichert
  - **Features:**
    - Integration mit `user_1rm` Table und `user_current_1rm` View
    - Support f√ºr gesch√§tzte vs. gemessene 1RM-Werte
    - Automatic Working Weight Calculation mit Training Max Support
    - Validation und Error Handling
    - Deutsche Fehlermeldungen
  - **Use Cases:**
    - Pre-Plan-Check: Identifiziere fehlende 1RM vor Plan-Start
    - Dynamic Weight Calculation: Berechne Arbeitsgewichte f√ºr Sets
    - Progressive Overload: Track 1RM-Entwicklung √ºber Zeit

- **performanceComparisonService.ts** ‚≠ê NEW (2024-12-30)
  - **Purpose:** Workout Performance Comparison
  - **Lines of Code:** 272 lines
  - **Key Functions:**
    - `compareWorkoutPerformance(sessionId)` - Vergleicht aktuelles Workout mit letztem
    - `getWorkoutPerformanceData(sessionId)` - L√§dt Performance-Daten
    - `findPreviousWeekWorkout(currentSessionId)` - Findet Vergleichs-Workout
    - `calculateExerciseAverage(sets)` - Berechnet Average Performance Score
  - **Performance Metrics:**
    - Average Weight
    - Average Reps
    - Average Volume (Weight √ó Reps)
    - Combined Score: `(avgWeight + avgReps + avgVolume) / 3`
  - **Features:**
    - Findet gleiches Workout der letzten Session (nicht nur letzte Woche)
    - Unterst√ºtzt Template-based und Custom Plans
    - Exercise-by-Exercise Comparison
    - Prozentuale √Ñnderungsberechnung
    - Handles missing previous data gracefully
  - **Returns:**
    - `ExercisePerformance[]` mit currentAverage, previousAverage, percentageChange
    - `hasPreviousData` flag f√ºr UI handling
  - **Integration:**
    - Verwendet in `WorkoutSummaryScreen` f√ºr Post-Workout Feedback
    - Displayed via `WorkoutPerformanceComparison` Component

**Testing:**
- Service Tests: `src/services/__tests__/`
- Test Scripts verf√ºgbar in package.json

#### 5. Utilities & Algorithms

**Location:** `src/utils/`

- **planRecommendationScoring.ts** ‚≠ê CORE ALGORITHM
  - **Intelligenter Plan Matching Algorithmus**
  - **4 Scoring Dimensions:**
    1. **Experience Score** (0-100): Matches User Fitness Level und Training Experience
    2. **Frequency Score** (0-100): Matches verf√ºgbare Training Days
    3. **Goal Score** (0-100): Matches Primary Fitness Goals
    4. **Volume Score** (0-100): Matches Training Volume Capacity
  - **Total Score:** Gewichteter Durchschnitt aller Dimensionen
  - **Completeness Tracking:** Identifiziert incomplete Plan Templates
  - **Optimizations:**
    - Nutzt `exercises_per_workout` direkt aus Database
    - Optimierte Volume Calculation: `calculateVolumeMatchOptimized()`
    - Fallback Support f√ºr Backwards Compatibility
  - **Functions:**
    - `getTopRecommendations()` - Returns Top N Recommendations
    - `calculateRecommendationScore()` - Main Scoring Engine
  - **Documentation:**
    - `.claude/research/scoring-optimization-summary.md`

- **recommendationAnalytics.ts** ‚≠ê ANALYTICS SYSTEM
  - **Comprehensive Analytics & Monitoring**
  - **Event Tracking:**
    - `recommendations_loaded` - Wenn Recommendations angezeigt werden
    - `plan_selected` - User w√§hlt einen Plan
    - `plan_created` - Plan erfolgreich erstellt
    - `incomplete_warning_shown` - Warning angezeigt
    - `incomplete_plan_accepted` - User akzeptiert incomplete Plan
    - `recommendations_error` - System Errors
  - **Features:**
    - Session Management f√ºr Flow Analysis
    - Konfigurierbare Sampling Rate (0.0 - 1.0)
    - GDPR-Compliant mit User Consent Checks
    - Health Monitoring und Real-time Alerts
    - Fail-Safe: Crasht die App nie
  - **Health Checks:**
    - Low Recommendation Quality Alerts (Score < 60)
    - All Recommendations Incomplete Warnings
    - No Recommendations Available Alerts
    - Slow Loading Detection (> 2 Sekunden)
    - Large Score Gap Detection
  - **Database Integration:**
    - Events gespeichert in Supabase
    - SQL Dashboards f√ºr Insights
    - Migration: `supabase/migrations/20241229_create_recommendation_events.sql`
  - **Documentation:**
    - `.claude/research/analytics-implementation-report.md`

**Utility Testing:**
- Tests: `src/utils/__tests__/`
- Run: `npm run test:scoring` oder `npm run test:scoring:all`

**Exports:** Alle Utilities exportiert via `src/utils/index.ts`

#### 6. Type System Updates

**Location:** `src/types/training.types.ts`

Enhanced TypeScript Definitionen inklusive:
- Plan Recommendation Types
- Score Breakdown Types
- Calorie Tracking Types
- Workout Session Types
- Fitness Statistics Types

#### 7. Database Schema Changes

**Neue Felder zu plan_templates (2024-12-28):**
- `estimated_sets_per_week` - Pre-calculated Total Sets per Week
- `exercises_per_workout` - Average Exercises per Workout Session
- `completion_status` - Plan Completeness Indicator ('complete' | 'incomplete')
- `popularity_score` - Plan Popularity Metric f√ºr Sorting

**Neue Felder zu profiles (2024-12-30):** ‚≠ê NEW
- **Migration:** `supabase/migrations/20241230_add_preferred_training_days.sql`
- **Field:** `preferred_training_days` - `INTEGER[]` (Array of 0-6, where 0=Sunday, 6=Saturday)
- **Purpose:** Erm√∂glicht Users ihre bevorzugten Trainingstage zu spezifizieren
- **Validation:**
  - Array length: 1-7 days (via CHECK constraint)
  - Values 0-6 (Application-level validation)
  - No duplicates (Application-level validation)
  - Should match length of `available_training_days`
- **Example:** `[1, 3, 5]` = Monday, Wednesday, Friday
- **Integration:** WeekdaySelector Component f√ºr UI

**Neue Felder zu training_plans (2024-12-30):** ‚≠ê NEW
- **Migration:** `supabase/migrations/20241230_add_week_tracking.sql`
- **Fields:**
  - `current_week` - `INTEGER DEFAULT 1` - Current week of plan (calculated from start_date)
  - `total_weeks` - `INTEGER` - Total duration in weeks (NULL = unlimited)
- **Purpose:** Week-based progression tracking f√ºr Training Plans
- **Functions Added:**
  - `calculate_current_week(p_plan_id UUID)` - Berechnet aktuelle Woche basierend auf start_date
  - `update_plan_current_week(p_plan_id UUID)` - Updated current_week Feld
  - `update_all_active_plans_weeks()` - Batch-Update aller aktiven Plans (f√ºr Cron)
- **Calculation Logic:**
  - Weeks since start: `FLOOR(EXTRACT(EPOCH FROM (CURRENT_DATE - start_date)) / (7 * 86400)) + 1`
  - Minimum week: 1
  - Capped at `total_weeks` if set
- **Use Cases:**
  - Progressive Overload: Track welche Woche im Plan
  - Auto-Progression: Automatic weight increments pro Woche
  - Plan Completion: Wissen wann Plan fertig ist
- **Integration:** PlanProgressScreen zeigt current_week

**Benefits:**
- Eliminiert Runtime Calculations w√§hrend Scoring
- Erm√∂glicht Dynamic Completeness Management
- Verbessert Query Performance
- Enables week-based progressive overload
- Supports preferred training day scheduling

#### 8. Testing Infrastructure (Training)

**Neue Test Files:**
- `src/components/training/__tests__/ScoreBreakdownChart.test.tsx`
- `src/services/__tests__/`
- `src/utils/__tests__/planRecommendationScoring.test.ts`

**Test Reports:**
- `.claude/test-reports/`
  - SUMMARY.md - Overall Test Summary
  - EXECUTIVE-SUMMARY.md - High-Level Overview
  - HOW-TO-RUN-TESTS.md - Test Execution Guide
  - README.md - Test Documentation
  - scoring-system-e2e-test-report.md - End-to-End Scoring Tests

**Test Scripts (package.json):**
```json
{
  "test": "tsx src/utils/__tests__/planRecommendationScoring.test.ts",
  "test:scoring": "tsx src/utils/__tests__/planRecommendationScoring.test.ts",
  "test:scoring:e2e": "tsx scripts/e2e-scoring-test-simple.ts",
  "test:scoring:all": "npm run test:scoring && npm run test:scoring:e2e",
  "test:auth": "tsx src/tests/auth.test.ts --quick",
  "test:auth:all": "tsx src/tests/auth.test.ts --all",
  "test:validation": "tsx src/tests/validation.test.ts"
}
```

#### 9. Documentation (Training)

**Neue Documentation Files:**

- **Integration Guides:**
  - `docs/INTEGRATION_GUIDE.md`
    - PlanRecommendationCard Integration Guide
    - Step-by-Step Implementation
    - Analytics Event Tracking
    - Error Handling Patterns

- **Research & Optimization:**
  - `.claude/research/analytics-implementation-report.md`
    - Analytics System Architecture
    - Event Tracking Specifications
    - Database Schema Details
    - Health Monitoring Configuration

  - `.claude/research/scoring-optimization-summary.md`
    - Scoring Algorithm Optimizations
    - Performance Improvements
    - Caching Strategies
    - Database Query Optimizations

  - `.claude/research/trainingsplan-entscheidungsbaum-optimierung.md`
    - Training Plan Decision Tree Optimization
    - Recommendation Logic Refinement

- **Deliverables:**
  - `.claude/deliverables/PlanRecommendationCard-Integration-Summary.md`
  - `.claude/deliverables/VISUAL_GUIDE.md`

- **Component Documentation:**
  - ScoreBreakdownChart.README.md - Component Usage Guide
  - ScoreBreakdownChart.SUMMARY.md - Implementation Details
  - ScoreBreakdownChart.accessibility.md - Accessibility Compliance
  - ScoreBreakdownChart.ANIMATION.md - Animation Specifications

- **Migration Guides:**
  - `.claude/migrations/README.md`
  - `.claude/migrations/QUICK_START.md`
  - `.claude/migrations/guided-flow-to-recommendations-migration.md`

- **Test Documentation:**
  - `.claude/tests/test-guided-plan-flow-recommendations.md`

---

## Supabase Schema

**18 Tabellen, alle erstellt:**

- Core: profiles, exercises (6 rows), intolerances_catalog (8 rows)
- Training: training_plans, plan_workouts, plan_exercises, workout_sessions, workout_sets, user_1rm, plan_templates, training_max_progression
- Nutrition: nutrition_goals, meal_plans, meals, meal_items, food_items, daily_nutrition_log
- Supplements: supplements, user_supplements
- Analytics: recommendation_events (NEW)

**Wichtige Schema-√Ñnderungen (2024-12-28 to 2024-12-30):**
- `plan_templates` enhanced mit: `estimated_sets_per_week`, `exercises_per_workout`, `completion_status`, `popularity_score`
- `profiles` enhanced mit: `preferred_training_days` (INTEGER[])
- `training_plans` enhanced mit: `current_week`, `total_weeks`
- `recommendation_events` f√ºr Analytics
- **NEW Functions:** `calculate_current_week()`, `update_plan_current_week()`, `update_all_active_plans_weeks()`

**RLS aktiviert** auf allen User-Tabellen.

---

## Implementierte Features (Stand: 2025-12-30)

### 1. Authentication System (‚úÖ Komplett)

**Dateien**: `src/lib/supabase.ts`, `src/services/auth.service.ts`

**Funktionen**:
- `signUp(email, password)` - Registrierung mit deutscher Fehlerbehandlung
- `signIn(email, password)` - Login
- `signOut()` - Logout
- `getCurrentUser()` - Aktueller User
- `onAuthStateChange(callback)` - Auth state listener
- `resetPassword(email)` - Passwort zur√ºcksetzen
- `updatePassword(newPassword)` - Passwort √§ndern

**Features**:
- AsyncStorage persistence f√ºr Sessions
- Alle Fehler in Deutsch
- TypeScript strict mode
- Response format: `{ user: User | null, error: string | null }`

**Tests**: `src/tests/auth.test.simple.ts` - Run mit `npm run test:auth:simple`

### 2. Form Validation System (‚úÖ Komplett)

**Dateien**: `src/utils/validation.ts`, `src/hooks/useForm.ts`

**Validators**:
- `validateEmail()` - Email-Format pr√ºfen
- `validatePassword()` - Min 8 Zeichen, Gro√ü-/Kleinbuchstaben, Zahl
- `validateName()` - Namen validieren
- `validateAge()` - Alter 13-120 Jahre
- `validateRegistrationForm()` - Komplette Registrierung
- `validateLoginForm()` - Login-Form

**useForm Hook**:
```typescript
const { values, errors, isSubmitting, handleChange, handleSubmit, reset } = useForm({
  initialValues: { email: '', password: '' },
  validate: validateLoginForm,
  onSubmit: async (values) => { /* logic */ }
});
```

**Tests**: 59 Unit Tests in `src/tests/validation.test.ts` - Run mit `npm run test:validation`

**Design-Entscheidung**: Keine externe Validation Library (Zod/Yup) f√ºr kleineren Bundle

### 3. UI Components (‚úÖ Komplett - Updated 2026-01-02)

**Location**: `src/components/ui/`

**Centralized Theme System** (2026-01-02): ‚≠ê NEW
- `theme.ts` - Centralized design system
  - Unified color palette (primary, semantic, neutral, brand)
  - Typography system (8 font sizes, 4 weights, line heights)
  - Spacing scale (10 levels: xs to 5xl)
  - Shadow definitions (sm, md, lg, xl)
  - Border radius scale (xs to full)

**Core Components** (Updated 2026-01-02):
- `Button.tsx` - Theme integration, improved variants
- `Card.tsx` - Simplified with theme, elevation support
- `Input.tsx` - Enhanced validation, better accessibility
- `Text.tsx` - Full typography system integration

**Form Components**:
- `FormGroup.tsx` ‚≠ê NEW - Form field wrapper with label/error
- `OptionButton.tsx` ‚≠ê NEW - Selectable option button
- `RadioGroup.tsx` - Theme integration, better spacing
- `NumberPicker.tsx` - Improved styling, haptic feedback
- `MultiSelectChips.tsx` - Theme colors, better touch targets
- `Slider.tsx` - Modern design, better labels
- `WeekdaySelector.tsx` - Theme colors, improved UX

**Display Components**:
- `ActivityChip.tsx` ‚≠ê NEW - Activity/tag chip component
- `Alert.tsx` ‚≠ê NEW - Professional alert/banner (4 variants)
- `InfoBox.tsx` ‚≠ê NEW - Information display box (collapsible)
- `ProfileField.tsx` ‚≠ê NEW - Profile information field
- `StatsCard.tsx` ‚≠ê NEW - Statistics card with trend indicators
- `GoalCard.tsx` - Modernized design, better icons
- `ProgressBar.tsx` - Animated, theme colors

**Layout Components**:
- `AppHeader.tsx` ‚≠ê NEW - App-wide header with logo
- `PageHeader.tsx` ‚≠ê NEW - Page-level header
- `SectionTitle.tsx` ‚≠ê NEW - Section header with divider

**Total:** 23+ UI Components

**Design System Features**:
- Single source of truth f√ºr Design-Tokens
- Consistent theming across entire app
- Easy customization and maintenance
- TypeScript strict mode mit vollst√§ndigen Interfaces
- Accessibility support (WCAG 2.1 AA target)
- Error states & validation feedback
- Loading states wo relevant
- Disabled states mit visueller R√ºckmeldung
- Native Performance (keine Web-Dependencies)

**Theme Migration Pattern**:
```typescript
// Old (duplicated in every file)
const COLORS = { primary: '#007AFF', ... };

// New (centralized)
import { theme } from '@/components/ui/theme';
const primaryColor = theme.colors.primary.blue500;
```

### 4. Profile Service (‚úÖ Komplett) - **NEU 2025-12-26**

**Datei**: `src/services/profile.service.ts`

**Zweck**: Service Layer f√ºr Profile-Management und Onboarding-Daten

**Funktionen**:
- `createProfile(data)` - Erstellt/aktualisiert Profil mit Onboarding-Daten
- `getProfile(userId)` - L√§dt User-Profil mit Intolerances
- `updateProfile(userId, updates)` - Aktualisiert spezifische Profil-Felder
- `getIntolerancesCatalog()` - L√§dt Intolerances Katalog aus DB
- `saveUserIntolerances(userId, intoleranceIds)` - Speichert User Intolerances
- `getUserIntolerances(userId)` - Holt User Intolerances mit Details
- `isOnboardingCompleted(userId)` - Pr√ºft Onboarding-Status
- `getProfileCompleteness(userId)` - Berechnet Profil-Vollst√§ndigkeit (0-100%)

**Features**:
- Deutsche Fehlermeldungen mit automatischem Error-Mapping
- TypeScript strict typing
- Service Layer Pattern (Trennung von UI und Business Logic)
- Integration mit Supabase (profiles + user_intolerances tables)
- Wiederverwendbare Funktionen f√ºr verschiedene Screens

**Response Format**: `{ data: T | null, error: string | null }`

### 5. Onboarding Screens (‚úÖ Komplett - 2025-12-26)

**Location**: `src/screens/onboarding/`

**6 Onboarding Screens**:

1. **OnboardingScreen1.tsx** - Basisdaten
   - Age (NumberPicker: 13-120)
   - Weight (NumberPicker: 40-200 kg)
   - Height (NumberPicker: 140-220 cm)
   - Gender (RadioGroup: Male/Female/Diverse)

2. **OnboardingScreen2.tsx** - Trainingserfahrung
   - Training Level (RadioGroup: Beginner/Intermediate/Advanced/Elite)
   - Years of Experience (NumberPicker: 0-50)
   - Days per Week (NumberPicker: 1-7)
   - Equipment Access (RadioGroup: Gym/Home/Both/Bodyweight)

3. **OnboardingScreen3.tsx** - Fitnessziele
   - Goal Selection (5 GoalCards):
     - üí™ Kraft aufbauen
     - üèãÔ∏è Muskelaufbau
     - üî• Gewicht verlieren
     - üèÉ Ausdauer steigern
     - üåü Allgemeine Fitness
   - Single-Select mit Icon & Checkmark

4. **OnboardingScreen4.tsx** - Lifestyle
   - Sleep Hours per Night (Slider: 4-12h mit 0.5h steps)
   - Stress Level (Slider: 1-10)

5. **OnboardingScreen5.tsx** - Unvertr√§glichkeiten
   - L√§dt Katalog aus Supabase (`intolerances_catalog`)
   - MultiSelectChips f√ºr Selection
   - Optional (Skip m√∂glich)
   - Error Handling mit Retry-Button

6. **OnboardingSummary.tsx** - Zusammenfassung & Submit
   - Zeigt alle Eingaben in Kategorien
   - "Bearbeiten" Links zu jedem Screen via `goToStep()`
   - Submit Button ‚Üí `submitOnboarding()` ‚Üí Supabase

**Gemeinsame Features**:
- ‚úÖ Integration mit `OnboardingContext` via `useOnboarding()` hook
- ‚úÖ Automatische Validierung vor `nextStep()`
- ‚úÖ ProgressBar in jedem Screen (currentStep / totalSteps * 100)
- ‚úÖ KeyboardAvoidingView f√ºr iOS/Android Keyboard-Handling
- ‚úÖ ScrollView f√ºr alle Inhalte (responsive auf kleinen Screens)
- ‚úÖ Deutsche Fehlermeldungen
- ‚úÖ Loading States (Screen 5 beim Laden, Summary beim Submit)
- ‚úÖ Error Handling mit User-Feedback
- ‚úÖ Navigation: `nextStep()`, `previousStep()`, `goToStep(n)`

**Supabase Integration**:
- Screen 5: `getIntolerancesCatalog()` l√§dt Optionen
- Summary: `submitOnboarding()` ‚Üí `createProfile()` ‚Üí Profil in DB

**Dokumentation**: `src/screens/onboarding/README.md`

### 6. Onboarding Context (‚úÖ Komplett - 2025-12-26)

**Datei**: `src/contexts/OnboardingContext.tsx`

**Zweck**: Zentrale State-Management f√ºr 6-stufigen Onboarding-Flow

**Architektur**:
- React Context + useReducer Pattern
- 6 separate Screens mit eigener Validation
- Integration mit ProfileService
- Progress Tracking (0-100%)

**State Structure**:
```typescript
{
  currentScreen: number,           // 0-5
  data: {
    gender: string | null,
    age: number | null,
    height: number | null,
    weight: number | null,
    goal: string | null,
    intolerances: string[]
  },
  errors: Record<string, string>,  // Field-level errors
  isSubmitting: boolean
}
```

**Actions**:
- `UPDATE_FIELD` - Update einzelnes Feld
- `NEXT_SCREEN` - N√§chster Screen (mit Validation)
- `PREVIOUS_SCREEN` - Zur√ºck
- `SET_ERROR` - Fehler setzen
- `CLEAR_ERROR` - Fehler l√∂schen
- `SET_SUBMITTING` - Loading state
- `RESET` - Zur√ºcksetzen

**Validation**:
- Screen-spezifische Validation vor Navigation
- Deutsche Fehlermeldungen
- Automatisches Error-Clearing bei Field-Update

### 7. Profile Edit System (‚úÖ Komplett - 2025-12-27)

**Location**: `src/screens/app/ProfileEditScreen.tsx`, `src/screens/app/ProfileScreen.tsx`

**Zweck**: Erm√∂glicht Usern, ihr Profil nach dem Onboarding zu bearbeiten

#### ProfileEditScreen

**Datei**: `src/screens/app/ProfileEditScreen.tsx`

**Architektur**:
- Comprehensive Single-Page Form mit 5 Sektionen
- ScrollView Layout mit KeyboardAvoidingView
- Integration mit ProfileService f√ºr CRUD Operations
- Reuse von Onboarding UI Components

**Form Sections**:

1. **Basisdaten** (Section 1)
   - Age (Input mit NumberPad, 13-120 Jahre)
   - Weight (Input mit DecimalPad, kg)
   - Height (Input mit DecimalPad, cm)
   - Gender (RadioGroup: Male/Female/Other)

2. **Training** (Section 2)
   - Fitness Level (OptionButtons: Beginner/Intermediate/Advanced)
   - Training Experience (Input, Monate)
   - Training Days per Week (NumberPicker: 1-7)
   - Gym Access (Switch: Ja/Nein)
   - Home Equipment (MultiSelectChips, conditional on no gym access)

3. **Trainingsziel** (Section 3)
   - Primary Goal (GoalCards mit Icons)

4. **Lifestyle** (Section 4)
   - Sleep Hours (Slider: 3-12h mit 0.5h steps)
   - Stress Level (Slider: 1-10)

5. **Unvertr√§glichkeiten** (Section 5)
   - Checkboxes f√ºr Intolerances aus Katalog
   - Severity Picker (Mild/Moderate/Severe/Life-threatening) per Intolerance

**Input Handling Strategy**:
- **Numeric Fields**: Separate `inputStrings` state preserves comma/period during typing
- **Reason**: Prevents value disappearing when user types "75," for weight

**Validation**:
- Client-side validation via `validateForm()` before save
- Field-level validations
- German error messages
- Validation errors displayed in error banner

**Data Flow**:
1. **Load**: `loadProfile()` ‚Üí `getProfile(userId)` + `getUserIntolerances(userId)` ‚Üí Populate `formData`
2. **Edit**: User changes ‚Üí `updateField(field, value)` ‚Üí Updates `formData` state
3. **Save**: `handleSave()` ‚Üí `validateForm()` ‚Üí `updateProfile()` + `saveUserIntolerances()` ‚Üí Navigate back
4. **Cancel**: `handleCancel()` ‚Üí `navigation.goBack()` (no save)

**UI/UX Features**:
- ‚úÖ Section Headers f√ºr klare Struktur
- ‚úÖ Error/Success Banners (rot/gr√ºn mit farbigem Hintergrund)
- ‚úÖ Disabled states w√§hrend Save
- ‚úÖ Success Message mit Checkmark
- ‚úÖ Auto-Navigation zur√ºck zu ProfileScreen nach Success

#### ProfileScreen Updates

**Datei**: `src/screens/app/ProfileScreen.tsx`

**Neue Features**:

1. **Edit Button** (Header)
2. **Auto-Refresh via useFocusEffect**:
```typescript
useFocusEffect(
  useCallback(() => {
    loadProfile(); // Reload when screen comes into focus
  }, [])
);
```

**Navigation Flow**:
```
ProfileScreen ‚Üí ProfileEditScreen ‚Üí Edit ‚Üí Save ‚Üí Navigate back ‚Üí Auto-Refresh
```

### 8. Daily Recovery Tracking System (‚úÖ Komplett - 2025-12-28)

**Dateien**: `src/services/recovery.service.ts`, `src/screens/app/DailyCheckinScreen.tsx`

**Zweck**: T√§gliches Tracking von Recovery-Metriken mit Score-Berechnung und Analytics

#### Recovery Service

**Datei**: `src/services/recovery.service.ts` (593 Zeilen)

**Core Metrics** (Required):
- Sleep Hours (0-12h)
- Sleep Quality (1-5)
- Stress Level (1-5, inverted f√ºr Score)
- Energy Level (1-5)
- Muscle Soreness (1-5, inverted f√ºr Score)
- Overall Readiness (1-5)

**Optional Metrics**:
- Mood (1-5)
- Hydration (1-5)
- Recovery Activities (string[])
- Notes (text)

**Recovery Score Algorithm**:
- Range: 0-100 (normalized)
- Weighted calculation:
  - Sleep Hours: 20% (optimal: 7-9h)
  - Sleep Quality: 20%
  - Energy Level: 15%
  - Stress Level: 15% (inverted)
  - Muscle Soreness: 15% (inverted)
  - Overall Readiness: 15%

**Score Interpretation**:
- 80-100: Excellent Recovery
- 60-79: Good Recovery
- 40-59: Moderate Recovery
- 20-39: Poor Recovery
- 0-19: Critical Recovery Needed

**Key Functions**:
```typescript
// CRUD
createRecoveryLog(data: RecoveryLogInput): Promise<RecoveryLog>
getRecoveryLog(date: string): Promise<RecoveryLog | null>
updateRecoveryLog(id: string, data: Partial<RecoveryLogInput>): Promise<RecoveryLog>
deleteRecoveryLog(id: string): Promise<void>
getAllRecoveryLogs(): Promise<RecoveryLog[]>

// Analytics
getRecoveryTrend(days: number): Promise<RecoveryTrend>
getCurrentStreak(): Promise<number>
getAverageScore(days: number): Promise<number>

// Helpers
calculateRecoveryScore(data: RecoveryLogInput): number
validateRecoveryInput(data: RecoveryLogInput): boolean
getScoreInterpretation(score: number): string
getRecommendation(score: number): string
```

**Data Storage**:
- AsyncStorage mit key structure: `recovery_log_${userId}_${date}`
- JSON serialization
- Date format: ISO (YYYY-MM-DD)

#### DailyCheckinScreen

**Datei**: `src/screens/app/DailyCheckinScreen.tsx` (750 Zeilen)

**Features**:
- Interactive Form mit Slider-Inputs f√ºr alle Metriken
- Real-time Recovery Score Preview mit color-coded display
- Pre-filled data f√ºr existing logs (Edit-Mode)
- Optional fields toggle
- Input validation mit visual feedback
- Success/Error messaging
- Haptic feedback (expo-haptics) on save
- Auto-navigation nach successful save

**UI Design**:
- Color-coded Recovery Score (Green/Blue/Yellow/Orange/Red)
- Slider-based inputs f√ºr intuitive entry
- Toggle f√ºr optional fields
- ScrollView layout mit KeyboardAvoidingView

**Integration**:
- HomeScreen displays current recovery status
- Auto-refresh on screen focus
- Navigation to DailyCheckinScreen

### 9. Training Module (‚úÖ Major Features Implementiert - 2024-12-28 to 2025-12-30)

**Status**: Production-Ready Components, Active Development f√ºr Screens

**Key Features**:
- ‚úÖ Intelligent plan recommendations mit 4-dimensional scoring
- ‚úÖ Calorie tracking and calculation
- ‚úÖ Fitness statistics dashboard
- ‚úÖ Workout session management mit pause/resume
- ‚úÖ Exercise alternatives
- ‚úÖ Custom and guided plan creation flows
- ‚úÖ Comprehensive analytics and monitoring
- ‚úÖ Real-time health checks and alerts
- ‚úÖ **1RM (One Rep Max) Tracking System** (2024-12-30)
  - Initial 1RM Input f√ºr neue Plans
  - Automatic Working Weight Calculation
  - Training Max (TM) Support mit configurable percentage
  - 1RM Estimation via Epley Formula
  - Historical 1RM Tracking
- ‚úÖ **Workout Performance Comparison** (2024-12-30)
  - Week-over-Week Performance Tracking
  - Exercise-by-Exercise Comparison
  - Percentage Improvement/Decline Metrics
  - Visual Performance Feedback
- ‚úÖ **Plan Progress Tracking** (2024-12-30)
  - Training Max Progression per Week
  - Week-based Plan Tracking
  - Progressive Overload Monitoring
- ‚úÖ **Preferred Training Days** (2024-12-30)
  - User-configurable training day preferences
  - Visual weekday selector

**Core Components**: Siehe "Recent Major Changes - Training Section Enhancement" oben

### 10. Navigation System (‚úÖ Komplett - 2025-12-26, updated 2025-12-28)

**Location**: `src/navigation/`

**Architektur**: Drei-Schicht Navigation (Auth ‚Üí Onboarding ‚Üí Main App)

#### AppNavigator (Root Navigator)

**Datei**: `src/navigation/AppNavigator.tsx`

**Zweck**: Root-Level Navigation die zwischen drei Hauptflows routet

**Features**:
- ‚úÖ Authentication State Management via `onAuthStateChange()`
- ‚úÖ Onboarding Completion Check via `isOnboardingCompleted()`
- ‚úÖ Automatic Flow Routing basierend auf User Status
- ‚úÖ Loading State w√§hrend Auth/Onboarding Check
- ‚úÖ Deep Link Configuration f√ºr Email Confirmation & Password Reset

**State Logic**:
```typescript
// Route to correct navigator
if (!user) return <AuthNavigator />;
if (!hasCompletedOnboarding) return <OnboardingNavigator />;
return <MainNavigator />;
```

**Deep Links**:
- `lifestyleapp://auth/callback` - Email Confirmation
- `lifestyleapp://auth/forgot-password` - Password Reset
- `lifestyleapp://login` - Login Screen
- `lifestyleapp://home` - Home Screen
- `lifestyleapp://profile` - Profile Screen

#### OnboardingNavigator

**Datei**: `src/navigation/OnboardingNavigator.tsx`

**Zweck**: Managed den 6-Screen Onboarding Flow

**Architektur**:
- State-based Navigation (nicht Stack-based)
- OnboardingContext managed `currentStep` (1-6)
- Switch-Statement rendert passenden Screen basierend auf Step

**Screen Mapping**:
- Step 1 ‚Üí OnboardingScreen1 (Basisdaten)
- Step 2 ‚Üí OnboardingScreen2 (Trainingserfahrung)
- Step 3 ‚Üí OnboardingScreen3 (Fitnessziele)
- Step 4 ‚Üí OnboardingScreen4 (Lifestyle)
- Step 5 ‚Üí OnboardingScreen5 (Unvertr√§glichkeiten)
- Step 6 ‚Üí OnboardingSummary (Submit)

**Navigation Methods**:
- `nextStep()` - N√§chster Screen (mit Validation)
- `previousStep()` - Vorheriger Screen
- `goToStep(n)` - Direkter Sprung zu Screen

#### MainNavigator

**Datei**: `src/navigation/MainNavigator.tsx`

**Zweck**: React Navigation Stack f√ºr Main App Screens

**Stack Screens**:
- Home (`src/screens/app/HomeScreen.tsx`) - Dashboard/Landing mit recovery status
- Profile (`src/screens/app/ProfileScreen.tsx`) - User Profile Display
- ProfileEdit (`src/screens/app/ProfileEditScreen.tsx`) - Profile Editing Form
- DailyCheckin (`src/screens/app/DailyCheckinScreen.tsx`) - Daily Recovery Check-in

**Configuration**:
```typescript
<Stack.Navigator
  screenOptions={{
    headerShown: true,
    animation: "slide_from_right",
  }}
  initialRouteName="Home"
>
```

**Features**:
- ‚úÖ Native Stack Navigator (performanter als Stack)
- ‚úÖ iOS Large Title Support
- ‚úÖ Slide Animation
- ‚úÖ Profile Edit Flow mit automatic data refresh
- ‚úÖ Daily Recovery Check-in Flow

**Future Screens** (geplant):
- Training Dashboard
- Training Plan Detail
- Workout Session
- Nutrition
- Progress/Stats

#### Navigation Types

**Datei**: `src/navigation/types.ts`

**TypeScript Param Lists f√ºr Type-Safe Navigation**:

```typescript
// Auth Flow
export type AuthStackParamList = {
  Login: undefined;
  Register: undefined;
  ForgotPassword: undefined;
  Welcome: undefined;
  AuthCallback: undefined;
};

// Main App Flow
export type MainStackParamList = {
  Home: undefined;
  Profile: undefined;
  ProfileEdit: undefined;
  DailyCheckin: { date?: string; logId?: string };
  Settings: undefined;
};
```

#### Navigation Flow Diagram

```
App Start
    ‚Üì
AppNavigator (Root)
    ‚îú‚îÄ getCurrentUser()
    ‚îú‚îÄ isOnboardingCompleted()
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Not Authenticated‚îÇ Auth + No Onboarding‚îÇ Auth + Onboarding‚îÇ
‚îÇ                  ‚îÇ                     ‚îÇ                  ‚îÇ
‚Üì                  ‚Üì                     ‚Üì
AuthNavigator      OnboardingNavigator   MainNavigator
(Login, Register)  (6 Screens)          (Home, Profile, DailyCheckin)
    ‚Üì                     ‚Üì
Sign In/Up         submitOnboarding()
    ‚Üì                     ‚Üì
OnboardingNavigator  ‚Üí MainNavigator
```

---

## Architecture Patterns

### Component Organization
- **Feature-based structure:** Components organized by feature (training, recovery, nutrition)
- **Index exports:** Each feature directory has an index.ts for clean imports
- **Separation of concerns:** UI components, services, and utilities clearly separated

### State Management
- **React Context API:** For global app state
- **Local component state:** For UI-specific state
- **AsyncStorage:** For persistent data caching
- **Service layer caching:** 5-minute TTL for frequently accessed data

### Data Flow
1. **User Input** ‚Üí Screen Component
2. **Screen Component** ‚Üí Service Layer
3. **Service Layer** ‚Üí Supabase API / Local Cache
4. **Response** ‚Üí Service Layer (with caching)
5. **Service Layer** ‚Üí Screen Component
6. **Screen Component** ‚Üí UI Components

### Performance Optimizations
- **Template Caching:** 5-minute in-memory cache for plan templates
- **React.memo:** Used for expensive components (e.g., ScoreBreakdownChart)
- **Optimized Queries:** Explicit SELECT lists, only necessary fields
- **Lazy Loading:** Components and data loaded on demand
- **Animation Performance:** 60fps target, staggered animations

### Accessibility Standards
- **WCAG 2.1 AA Compliance:** Target for all new components
- **Color Contrast:** Minimum 4.5:1 for text, 3:1 for UI components
- **Touch Targets:** Minimum 44√ó44pt for all interactive elements
- **Screen Reader Support:** Semantic labels, hints, and roles
- **Keyboard Navigation:** Full keyboard accessibility

---

## AI Agent System

The project uses specialized AI agents for different development tasks:

**Location:** `.claude/agents/`

### Active Agents

- **context-manager.md** - Maintains this documentation file
- **training-planner-agent.md** - Training feature development
- **training-service-builder.md** - Training service layer
- **training-screens-builder.md** - Training screen development
- **training-navigation-builder.md** - Training navigation
- **training-ui-components-builder.md** - Training UI components
- **unit-test-generator.md** - Test generation
- **recovery-schema-builder.md** - Recovery feature schema
- **recovery-service-builder.md** - Recovery service layer
- **profile-service-builder.md** - Profile management
- **profile-edit-screen-builder.md** - Profile editing
- **daily-checkin-screen-builder.md** - Daily check-in feature
- **onboarding-screens-builder.md** - Onboarding flow
- **onboarding-navigation-builder.md** - Onboarding navigation
- **onboarding-context-builder.md** - Onboarding state
- **auth-logic-builder.md** - Authentication logic
- **auth-screens-builder.md** - Authentication screens
- **form-validation-builder.md** - Form validation
- **ui-components-builder.md** - General UI components
- **supplement-agent.md** - Supplement tracking
- **github-repo-manager.md** - Repository management

---

## Aktuelle Phase: MVP + Training Module

**Abgeschlossen**:
- ‚úÖ Authentication Service
- ‚úÖ Form Validation System
- ‚úÖ UI Components (13 Components)
- ‚úÖ Testing Setup
- ‚úÖ Profile Service
- ‚úÖ Onboarding Context
- ‚úÖ Onboarding Screens (6 Screens + Summary)
- ‚úÖ **Navigation System**:
  - ‚úÖ AppNavigator (Root with Auth/Onboarding/Main routing)
  - ‚úÖ OnboardingNavigator (State-based 6-screen flow)
  - ‚úÖ MainNavigator (Home/Profile/ProfileEdit/DailyCheckin stack)
  - ‚úÖ Navigation Types (TypeScript param lists)
- ‚úÖ Main App Screens (Home, Profile)
- ‚úÖ **Profile Edit System**
- ‚úÖ **Daily Recovery Tracking System**
- ‚úÖ **Training Module** (Major Features):
  - ‚úÖ Training Components (CalorieCard, ScoreBreakdownChart, etc.)
  - ‚úÖ Training Services (trainingService, calorieCalculationService)
  - ‚úÖ Training Utilities (4D Scoring Algorithm, Analytics)
  - ‚úÖ Training Screens (Dashboard, Guided Flow, Custom Flow, etc.)
  - ‚úÖ Testing Infrastructure
  - ‚úÖ Comprehensive Documentation

**In Arbeit**:
- üîÑ Login & Registrierung Screens
- üîÑ AuthNavigator Implementation
- üîÑ App.tsx Integration & Testing

**N√§chste Schritte**:
- ‚è∏Ô∏è Auth Screens fertigstellen (Login, Register, ForgotPassword)
- ‚è∏Ô∏è Training Module Integration Testing
- ‚è∏Ô∏è Nutrition Tracking
- ‚è∏Ô∏è Production Deployment Vorbereitung

---

## Architektur-Entscheidungen

### 1. Validation ohne externe Library
**Entscheidung**: Custom validation in `src/utils/validation.ts` statt Zod/Yup
**Grund**: Kleinerer Bundle, volle Kontrolle, ausreichend f√ºr MVP
**Impact**: 59 Tests, alle Validation-Regeln selbst definiert

### 2. Testing Setup ohne Framework
**Entscheidung**: `tsx` + console assertions statt Jest/Vitest
**Grund**: Schneller Setup, weniger Dependencies f√ºr MVP
**Future**: Migration zu Jest empfohlen wenn Projekt w√§chst

### 3. Supabase AsyncStorage Integration
**Entscheidung**: AsyncStorage f√ºr Session persistence
**Grund**: Native persistence, keine zus√§tzlichen Cookies n√∂tig
**Implementation**: In `src/lib/supabase.ts` konfiguriert

### 4. Deutsche Error Messages
**Entscheidung**: Alle Fehler in Deutsch
**Grund**: Zielgruppe ist deutsch
**Future**: i18n-Support wenn internationale Expansion geplant

### 5. Service Layer Pattern
**Entscheidung**: Separate `services/` f√ºr Business Logic
**Grund**: Trennung von UI und Logik, bessere Testbarkeit
**Example**: `auth.service.ts` kann ohne UI getestet werden
**Update**: Erweitert um Training, Recovery, Profile Services

### 6. Context + Reducer f√ºr Multi-Step Forms
**Entscheidung**: React Context + useReducer f√ºr Onboarding-Flow
**Grund**:
- Zentraler State √ºber 6 Screens
- Validation vor Screen-Wechsel
- Einfaches Progress-Tracking
- Kein Redux f√ºr MVP n√∂tig
**Implementation**: `OnboardingContext.tsx` mit 7 Actions

### 7. Component-Based UI ohne externe UI Library
**Entscheidung**: Eigene UI Components in `src/components/ui/` statt Library
**Grund**:
- Volle Design-Kontrolle
- Kleinerer Bundle Size
- Keine Breaking Changes durch Library Updates
- Native Performance (kein Web-Bridge)
**Implementation**: 13 Components mit consistentem Design System

### 8. Multi-Step Onboarding Pattern
**Entscheidung**: 6 separate Screens statt Single-Page Form
**Grund**:
- Bessere UX auf Mobile
- Klare Progress-Indication
- Screen-spezifische Validation m√∂glich
- Einfacher zu navigieren
**Implementation**: State-based Navigation via OnboardingContext

### 9. Three-Tier Navigation Architecture
**Entscheidung**: Drei separate Navigator-Schichten (Auth, Onboarding, Main)
**Grund**:
- Klare Trennung
- Zustandsbasierte Navigation
- Einfache Flow-Kontrolle
- Bessere Performance
- Type Safety
**Implementation**: AppNavigator mit conditional rendering

### 10. State-Based vs Stack-Based Navigation f√ºr Onboarding
**Entscheidung**: State-Based Navigation f√ºr Onboarding
**Grund**:
- Bessere UX (kein Back-Stack Confusion)
- `goToStep(n)` erlaubt direkten Sprung
- Screen-Wechsel nur via `nextStep()` mit Validation
**Trade-off**: Kein nativer Back-Button Support

### 11. Profile Edit with Input String Preservation
**Entscheidung**: Separate `inputStrings` state f√ºr numeric inputs
**Problem**: React Native TextInput l√∂scht Value bei trailing comma
**Grund**: Bessere UX beim Tippen von Dezimalzahlen
**Trade-off**: Mehr State-Management, aber deutlich bessere UX

### 12. useFocusEffect f√ºr Auto-Refresh
**Entscheidung**: useFocusEffect Hook statt manueller Refresh-Button
**Grund**:
- Automatisches Reload nach R√ºckkehr von ProfileEdit
- Bessere UX
- Stellt sicher dass User immer aktuelle Daten sieht
**Trade-off**: Minimaler Performance-Impact (akzeptabel)

### 13. Recovery Score Algorithm
**Entscheidung**: Weighted Score mit 6 Core Metrics (0-100 normalized)
**Grund**:
- Balanced Representation
- Inverted Scoring f√ºr negative Faktoren
- Industry-Standard Ranges
- Real-time Calculation
**Trade-off**: Simpler als ML-based, aber ausreichend f√ºr MVP

### 14. AsyncStorage f√ºr Recovery Data
**Entscheidung**: AsyncStorage statt Supabase f√ºr Recovery Logs
**Grund**:
- Offline-First
- Keine Network-Latency
- Privacy (sensible Health-Daten bleiben lokal)
- MVP-Speed
**Future**: Migration zu Supabase f√ºr cloud sync
**Trade-off**: Keine Cloud-Backup, aber bessere UX f√ºr MVP

### 15. Template Caching f√ºr Training Plans
**Entscheidung**: 5-Minuten In-Memory Cache f√ºr Plan Templates
**Grund**:
- Drastisch reduzierte Database Calls
- Bessere Performance
- Templates √§ndern sich selten
**Implementation**: `trainingService.ts` mit TTL-based cache
**Trade-off**: Potential stale data, aber akzeptabel bei 5-min TTL

### 16. 4-Dimensional Scoring Algorithm
**Entscheidung**: Experience + Frequency + Goal + Volume Scoring
**Grund**:
- Holistische Plan-Bewertung
- Ber√ºcksichtigt User-Profil vollst√§ndig
- Transparente Score-Breakdown f√ºr User
- Optimierbar durch Database Pre-Calculations
**Implementation**: `planRecommendationScoring.ts`
**Trade-off**: Komplexer als simple Matching, aber viel pr√§ziser

### 17. GDPR-Compliant Analytics
**Entscheidung**: Built-in Analytics mit User Consent Checks
**Grund**:
- GDPR-Compliance von Anfang an
- User Privacy First
- Fail-Safe (crasht nie die App)
- Konfigurierbare Sampling Rate
**Implementation**: `recommendationAnalytics.ts`

### 18. 1RM Tracking via Database View
**Entscheidung**: `user_current_1rm` View statt direkte `user_1rm` Queries
**Grund**:
- Automatic "latest per exercise" logic via View
- Cleaner Service Layer Code
- Better Performance (View is indexed)
- Consistent Data Access Pattern
**Implementation**: `oneRMService.ts` nutzt `user_current_1rm` View
**Trade-off**: View-Updates bei Schema-Changes n√∂tig

### 19. Epley Formula f√ºr 1RM Estimation
**Entscheidung**: Epley-Formel (1RM = weight √ó (1 + reps/30)) f√ºr Sch√§tzungen
**Grund**:
- Industry-Standard Formel
- Pr√§zise f√ºr 1-10 Wiederholungen
- Einfach zu berechnen
- Wissenschaftlich validiert
**Alternative**: Brzycki, Lombardi, Mayhew Formulas
**Trade-off**: Weniger genau bei sehr hohen Wiederholungen (>10)

### 20. Week-based Progressive Overload
**Entscheidung**: Week Tracking via `current_week` und `total_weeks` Fields
**Grund**:
- Strukturierte Progressive Overload
- Clear Plan Progression
- Enables Automatic Weight Increments
- User kann Progress sehen
**Implementation**: Database Functions f√ºr auto-calculation
**Trade-off**: Ben√∂tigt Cron-Job f√ºr automatische Updates (alternative: calculate on-demand)

### 21. Performance Comparison via Combined Score
**Entscheidung**: Combined Score aus Weight, Reps und Volume
**Grund**:
- Holistische Performance-Bewertung
- Ber√ºcksichtigt mehrere Faktoren
- Verhindert Gaming (z.B. nur Gewicht erh√∂hen)
- Balanced Metric
**Formula**: `(avgWeight + avgReps + avgVolume) / 3`
**Trade-off**: Komplexer als single metric, aber genauer

### 22. Centralized Theme System statt Multiple Design Systems
**Entscheidung**: Single `theme.ts` file statt duplicate COLORS/SPACING in jedem File
**Grund**:
- DRY (Don't Repeat Yourself) Prinzip
- Single Source of Truth f√ºr Design-Tokens
- Einfachere Theme-Anpassungen (nur eine Datei √§ndern)
- Konsistenz √ºber gesamte App garantiert
- Bessere Wartbarkeit und Skalierbarkeit
- TypeScript Auto-Completion f√ºr Theme-Properties
**Implementation**:
- Central theme.ts mit colors, typography, spacing, shadows, borderRadius
- Components importieren theme statt eigene Konstanten
**Before**: 50+ Files mit duplicate COLORS/SPACING definitions
**After**: 1 theme.ts + imports in alle Components
**Trade-off**: Minimal (nur Import overhead), aber massiv bessere Maintainability

### 23. Component-Based Design System statt Screen-Level Styling
**Entscheidung**: Wiederverwendbare UI-Components f√ºr common patterns
**Grund**:
- Consistency: Gleiche Patterns sehen √ºberall gleich aus
- Reusability: Write once, use everywhere
- Maintainability: Fix in one place, fixed everywhere
- Speed: Schnellere Feature-Entwicklung mit bestehenden Components
**Examples**:
- `ProfileField` statt duplicate Label+Value code in jedem Screen
- `SectionTitle` statt custom section headers
- `StatsCard` statt duplicate stat displays
- `FormGroup` statt manual label+input+error rendering
**Trade-off**: Initiale Investment in Component-Creation, aber massive Langzeit-Benefits

---

## Development Guidelines

### Code Style
- **TypeScript:** Strict mode enabled, all files must be fully typed
- **Naming Conventions:**
  - Components: PascalCase (e.g., `PlanRecommendationCard.tsx`)
  - Services: camelCase with .ts extension (e.g., `trainingService.ts`)
  - Utilities: camelCase (e.g., `planRecommendationScoring.ts`)
  - Types: PascalCase interfaces and types (e.g., `PlanRecommendation`)
- **File Organization:**
  - One component per file
  - Co-located tests in `__tests__/` directories
  - Documentation files alongside components when needed
- Functional components + Hooks (keine Classes)
- Async/await (keine Promises.then)
- Descriptive variable names (deutsch ok)
- Error handling √ºberall
- Comments nur wenn n√∂tig
- Alle Dateien mit absoluten Pfaden referenzieren in Dokumentation

### Testing Requirements
- **Unit Tests:** For utilities and services
- **Component Tests:** For complex UI components
- **E2E Tests:** For critical user flows
- **Coverage Goals:** Focus on business logic and critical paths
- **Test Location:** `__tests__/` directories alongside source files

### Documentation Requirements
- **Component README:** For complex components (see ScoreBreakdownChart)
- **API Documentation:** For services and utilities
- **Migration Guides:** For architectural changes
- **Integration Guides:** For feature implementations

---

## Known Issues & Technical Debt

### UI System (Updated 2026-01-02)
1. **Theme System:**
   - ‚úÖ Centralized theme implemented
   - ‚ö†Ô∏è Dark mode not yet implemented (theme ready, needs screen updates)
   - ‚ö†Ô∏è Theme switching mechanism not implemented
   - ‚ö†Ô∏è Some legacy components still use local COLORS (migration in progress)

2. **Components:**
   - ‚ö†Ô∏è No reduced motion support (medium priority)
   - ‚ö†Ô∏è No RTL support for Arabic/Hebrew (medium priority)
   - ‚ö†Ô∏è Multi-language support needed (currently German only)

### Training Module
1. **ScoreBreakdownChart:**
   - ‚ö†Ô∏è No reduced motion support (medium priority)
   - ‚ö†Ô∏è No RTL support for Arabic/Hebrew (medium priority)
   - ‚ö†Ô∏è No dark mode color optimization (medium priority)
   - Multi-language support needed (currently German only)

2. **Performance:**
   - Monitor template cache hit rates
   - Consider implementing request debouncing for rapid profile changes

3. **Analytics:**
   - Need to implement sampling rate configuration for high traffic
   - Add A/B testing framework for recommendation algorithm

4. **1RM & Performance Tracking:**
   - ‚ö†Ô∏è PlanProgressScreen: "1RM aktualisieren" Button zeigt nur Alert (Feature not implemented yet)
   - ‚ö†Ô∏è Performance Comparison: Chart visualization noch nicht implementiert (nur Data Service)
   - ‚ö†Ô∏è Historical Performance: Component erstellt aber noch nicht vollst√§ndig integriert
   - Need to add validation for Training Max increments
   - Consider adding auto-increment suggestions based on performance
   - Week tracking updates aktuell manuell (should be automated via Cron)

### General
- Auth Screens noch nicht implementiert
- Nutrition Module noch nicht begonnen
- Supplement Tracking in Planung
- TrainingStackNavigator needs to register new screens (OneRMInputScreen, PlanProgressScreen)

### Future Enhancements
- **Dark Mode:** Theme system ready, needs screen-level implementation
- **Theme Switching:** User preference storage + toggle UI
- Reduced motion accessibility support
- RTL language support
- Multi-language internationalization (i18n)
- Offline mode support
- Social features (plan sharing, leaderboards)
- Cloud sync f√ºr Recovery Logs
- Advanced analytics dashboard
- **Component Library:** Consider extracting to separate package for reusability

---

## Build & Run

### Development
```bash
npm start          # Start Expo development server
npm run android    # Run on Android
npm run ios        # Run on iOS
npm run web        # Run in web browser
```

### Testing
```bash
npm test                  # Run all tests
npm run test:scoring      # Run scoring algorithm tests
npm run test:scoring:e2e  # Run end-to-end scoring tests
npm run test:scoring:all  # Run all scoring tests
npm run test:auth         # Run auth tests (quick)
npm run test:auth:all     # Run all auth tests
npm run test:validation   # Run validation tests
npm run lint              # TypeScript type checking
```

---

## Dependencies

### Production Dependencies
- React 19.1.0
- React Native 0.81.5
- Expo ~54.0.30
- Supabase JS Client 2.89.0
- React Navigation 7.x
- React Native Paper 5.14.5
- AsyncStorage 2.2.0
- Expo Linear Gradient 15.0.8
- Expo Haptics 15.0.8
- **react-native-svg** ‚≠ê NEW (2026-01-02) - SVG graphics support

### Development Dependencies
- TypeScript 5.9.2
- tsx 4.19.2 (TypeScript execution)
- ts-node 10.9.2
- dotenv 16.4.7

---

## Git Workflow

### Branch Strategy
- `main` - Production-ready code
- `feature/*` - Feature development branches
- Current: `feature/training-section`

### Commit Messages
Follow conventional commits format:
- `feat:` - New features
- `fix:` - Bug fixes
- `refactor:` - Code refactoring
- `docs:` - Documentation changes
- `test:` - Test additions/changes
- `chore:` - Maintenance tasks

### Recent Commits
- 42409681 - Merge feature/ui-modernization into main (2026-01-02)
- 18a30409 - feat: modernize UI design system with comprehensive component updates (2026-01-02)
- 2927bcd3 - Merge feature/training-section into main
- ad49766e - neue √§nderungen bzgl. dynamischer und statischer pl√§ne
- e3cc42c6 - Trainingssection funtioniert jetzt weitesgehend. Kleinere Bugs sind noch zu fixen

---

## Additional Resources

### Testing Guides
- `TRAINING_MODULE_TESTING.md`
- `CUSTOM_PLAN_FLOW_TESTING.md`

### Component Documentation
All major components have dedicated documentation in their respective directories.

### AI Agent Documentation
Refer to `.claude/agents/` for specialized agent capabilities and usage.

---

## Supabase Access

Via MCP Server - direkte DB-Zugriffe m√∂glich.

---

**Note:** This document is actively maintained by the context-manager agent and should be updated whenever significant changes are made to the project architecture, features, or development practices.
